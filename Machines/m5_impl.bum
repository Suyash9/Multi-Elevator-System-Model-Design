<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<org.eventb.core.machineFile org.eventb.core.configuration="org.eventb.core.fwd" org.eventb.core.generated="false" org.eventb.texttools.text_lastmodified="1553775936062" org.eventb.texttools.text_representation="machine m5_impl refines m4_buttons  sees c3_door&#10;&#10;variables floor cabinShaft motor door up_buttons_array down_buttons_array floor_buttons_array&#10;&#10;invariants&#10;  @typeof-up-buttons-array up_buttons_array ∈ FLOOR → BOOL // change to array&#10;  @typeof-down-buttons-array down_buttons_array ∈ FLOOR → BOOL // change to array&#10;  @typeof-floor-buttons-array floor_buttons_array ∈ CABIN → (FLOOR → BOOL) // change to array&#10;  @gluing-up_buttons upButtons = dom(up_buttons_array ▷ {TRUE})&#10;  @gluing-down_buttons downButtons = dom(down_buttons_array ▷ {TRUE})&#10;  @gluing-floor_buttons1 ∀c·c∈CABIN ⇒ floorButtons(c) = dom(floor_buttons_array(c) ▷ {TRUE})&#10;  @gluing-floor_buttons2 ∀c·c∈CABIN ⇒ floor_buttons_array(c) = (floorButtons(c)×{TRUE})∪(((0‥TOP_FLOOR)∖floorButtons(c))×{FALSE}) // gluing invariants for every cabin c&#10;  @no_upButton_on_TOP_FLOOR up_buttons_array(TOP_FLOOR) = FALSE // no up request from TOP_FLOOR&#10;  @no_downButton_on_0 down_buttons_array(0) = FALSE // no down request from floor 0&#10;&#10;events&#10;  event INITIALISATION&#10;    then&#10;      @init-floor; floor ≔ INIT_FLOOR&#10;      @init-shaft; cabinShaft ≔ INIT_SHAFT&#10;      @init-motor; motor ≔ INIT_MOTOR&#10;      @init-door; door ≔ INIT_DOOR&#10;      @init-up_buttons; up_buttons_array ≔ (FLOOR) × {FALSE}&#10;      @init-down_buttons; down_buttons_array ≔ (FLOOR) × {FALSE}&#10;      @init-floor_buttons; floor_buttons_array ≔ CABIN × {(FLOOR × {FALSE})} // initially no requests, so false for everything&#10;  end&#10;&#10;  event CabinMovesUp refines CabinMovesUp&#10;    any c&#10;    where&#10;      @grd1; c ∈ CABIN&#10;      @grd2; floor(c) ≠ TOP_FLOOR&#10;      @grd3; cabinShaft(c) = UP&#10;      @grd4; ∀x·(x∈CABIN∧cabinShaft(x)=UP)⇒floor(x)≠floor(c)+1&#10;      @grd5; motor(c) = ON&#10;      @grd6; door(c) = CLOSED&#10;      @grd7; up_buttons_array(floor(c)) = FALSE // no request from this floor to go up&#10;      @grd8; (floor_buttons_array(c))(floor(c)) = FALSE // no request from this cabin at this floor&#10;    then&#10;      @act1 floor(c) ≔ floor(c) + 1&#10;  end&#10;&#10;  event CabinMovesDown refines CabinMovesDown&#10;    any c&#10;    where&#10;      @grd1 c ∈ CABIN&#10;      @grd2 floor(c) ≠ 0&#10;      @grd3; cabinShaft(c) = DOWN&#10;      @grd4; ∀x·(x∈CABIN∧cabinShaft(x)=DOWN)⇒floor(x)≠floor(c)−1&#10;      @grd5; motor(c) = ON&#10;      @grd6; door(c) = CLOSED&#10;      @grd7; down_buttons_array(floor(c)) = FALSE // same concepts as above event&#10;      @grd8; (floor_buttons_array(c))(floor(c)) = FALSE&#10;    then&#10;      @act1; floor(c) ≔ floor(c) − 1&#10;  end&#10;&#10;  event CabinDownToUp refines CabinDownToUp&#10;    any c&#10;    where&#10;      @grd1; c ∈ CABIN&#10;      @grd2; floor(c) = 0 // satisfies REQ 5&#10;      @grd3; cabinShaft(c) = DOWN&#10;      @grd4; ∀y·(y∈CABIN∧cabinShaft(y)=UP)⇒(floor(y)≠0) // to satisfy inv3 (SAF 8)&#10;      @grd5; motor(c) = OFF&#10;      @grd6; door(c) = CLOSED&#10;      @grd7; (floor_buttons_array(c))(floor(c)) = FALSE // only change shaft if no request for this cabin to stop at this floor&#10;      @grd8; (∃f·(f∈floor_buttons_array[CABIN]∧TRUE∈ran(f))) ∨ TRUE ∈ ran(up_buttons_array ∪ down_buttons_array) // must be some request in the system to justify a cabin&#10;    then&#10;      @act1; cabinShaft(c) ≔ UP&#10;  end&#10;&#10;  event CabinUpToDown refines CabinUpToDown&#10;    any c&#10;    where&#10;      @grd1; c ∈ CABIN&#10;      @grd2; floor(c) = TOP_FLOOR // satisfies REQ 4&#10;      @grd3; cabinShaft(c) = UP&#10;      @grd4; ∀x·(x∈CABIN∧cabinShaft(x)=DOWN)⇒floor(x)≠TOP_FLOOR // to satisfy inv3 (SAF 8)&#10;      @grd5; motor(c) = OFF&#10;      @grd6; door(c) = CLOSED&#10;      @grd7; (floor_buttons_array(c))(floor(c)) = FALSE&#10;      @grd8; (∃f·(f∈floor_buttons_array[CABIN]∧TRUE∈ran(f))) ∨ TRUE ∈ ran(up_buttons_array ∪ down_buttons_array) // same concepts as the event above&#10;    then&#10;      @act1; cabinShaft(c) ≔ DOWN&#10;  end&#10;&#10;  event MotorStopsChangeShaft refines MotorStopsChangeShaft&#10;    any c&#10;    where&#10;      @grd1; c ∈ CABIN&#10;      @grd2; motor(c) = ON&#10;      @grd3; (cabinShaft(c) = UP) ⇒ floor(c) = TOP_FLOOR&#10;      @grd4; (cabinShaft(c) = DOWN) ⇒ floor(c) = 0&#10;      @grd5; (∃f·f ∈ FLOOR ∧ f≠floor(c)∧(floor_buttons_array(c))(f) = TRUE) ∨ (cabinShaft(c) = UP ⇒ (TRUE ∈ ran(down_buttons_array))) ∨ (cabinShaft(c) = DOWN ⇒ (TRUE ∈ ran(up_buttons_array))) // there must be some request to justify a cabi stopping its motor and changing its shaft&#10;    then&#10;      @act1; motor(c) ≔ OFF&#10;  end&#10;&#10;  event MotorStopsAvoidCollision refines MotorStopsAvoidCollision&#10;    any c&#10;    where&#10;      @grd1; c ∈ CABIN&#10;      @grd2; motor(c) = ON&#10;      @grd3; (cabinShaft(c) = UP) ⇒ (∃x·x∈CABIN∧cabinShaft(x)=UP∧floor(x)=floor(c)+1)&#10;      @grd4; (cabinShaft(c) = DOWN) ⇒ (∃x·x∈CABIN∧cabinShaft(x)=DOWN∧floor(x)=floor(c)−1)&#10;    then&#10;      @act1; motor(c) ≔ OFF&#10;  end&#10;&#10;  event MotorStopsNoRequest refines MotorStopsNoRequest&#10;    any c&#10;    where&#10;      @grd1; c ∈ CABIN&#10;      @grd2; motor(c) = ON&#10;      @grd3; ((∀f·(f∈floor_buttons_array[CABIN]⇒TRUE∉ran(f)))) // no requests from any cabin&#10;      @grd4; TRUE ∉ ran(up_buttons_array ∪ down_buttons_array) // no up or down requests at any floor&#10;    then&#10;      @act1; motor(c) ≔ OFF&#10;  end&#10;&#10;  event MotorStopsOtherCabinRequest refines MotorStopsOtherCabinRequest&#10;    any c&#10;    where&#10;      @grd1; c ∈ CABIN&#10;      @grd2; motor(c) = ON&#10;      @grd3; TRUE ∉ ran(up_buttons_array ∪ down_buttons_array)// no up or down requests from any floor&#10;      @grd4; (cabinShaft(c) = UP) ⇒ (∀f·f∈floor_buttons_array[CABIN] ⇒ TRUE ∉ f[floor(c)‥TOP_FLOOR])   // if cabin is in UP shaft, no other cabin has a request to go to this cabin's current floor or the one above it&#10;      @grd5; (cabinShaft(c) = DOWN) ⇒ (∀f·f∈floor_buttons_array[CABIN] ⇒ TRUE ∉ f[0‥floor(c)]) // same concept as above guard but for DOWN shaft&#10;    then&#10;      @act1; motor(c) ≔ OFF&#10;  end&#10;&#10;  event MotorStopsServesRequest refines MotorStopsServesRequest&#10;    any c&#10;    where&#10;      @grd1; c ∈ CABIN&#10;      @grd2; motor(c) = ON&#10;      @grd3; (cabinShaft(c) = DOWN) ⇒ (down_buttons_array(floor(c)) = TRUE ∨ (floor_buttons_array(c))(floor(c)) = TRUE) // if cabin is in DOWN shaft, either there is a down request at the current floor or the cabin has a request to stop at this floor&#10;      @grd4; (cabinShaft(c) = UP) ⇒ (up_buttons_array(floor(c)) = TRUE ∨ (floor_buttons_array(c))(floor(c)) = TRUE) // if cabin is in UP shaft, either there is a up request at the current floor or the cabin has a request to stop at this floor&#10;    then&#10;      @act1; motor(c) ≔ OFF&#10;  end&#10;&#10;  event MotorStarts refines MotorStarts&#10;    any c&#10;    where&#10;      @grd1; c ∈ CABIN&#10;      @grd2; motor(c) = OFF&#10;      @grd3; (cabinShaft(c)=DOWN⇒floor(c)≠0) // cabin's motor can't start when it is in DOWN shaft and bottom floor- where would it go?&#10;      @grd4; (cabinShaft(c)=UP⇒floor(c)≠TOP_FLOOR) // same as above but for UP shaft&#10;      @grd5; (cabinShaft(c)=UP)⇒(∀x·(x∈CABIN∧cabinShaft(x)=UP⇒floor(x)≠floor(c)+1)) // if cabin is in UP shaft, its motor should not be started if there is another cabin above it&#10;      @grd6; (cabinShaft(c)=DOWN)⇒(∀x·(x∈CABIN∧cabinShaft(x)=DOWN⇒floor(x)≠floor(c)−1))&#10;      @grd7; door(c) = CLOSED&#10;      @grd8; (floor_buttons_array(c))(floor(c)) = FALSE // no request to stop at this floor&#10;      @grd9; (cabinShaft(c) = UP) ⇒ (up_buttons_array(floor(c))≠TRUE) // if in UP shaft there is no up request on the floor at which the cabin is&#10;      @grd10; (cabinShaft(c) = DOWN) ⇒ (down_buttons_array(floor(c))≠TRUE) // if in DOWN shaft there is no down request on the at which the cabin is&#10;      @grd11; (∃f·(f∈floor_buttons_array[CABIN]∧TRUE∈ran(f))) ∨ TRUE ∈ ran(up_buttons_array ∪ down_buttons_array) //&#10;    then&#10;      @act1; motor(c) ≔ ON&#10;  end&#10;&#10;  event DoorHalfToOpen_DOWN refines DoorHalfToOpen_DOWN&#10;    any c&#10;    where&#10;      @grd1; c ∈ CABIN&#10;      @grd2; motor(c) = OFF&#10;      @grd3; door(c) = HALF&#10;      @grd4; cabinShaft(c) = DOWN&#10;      @grd5; down_buttons_array(floor(c)) = TRUE ∨ (floor_buttons_array(c))(floor(c)) = TRUE // only open if there is a request at that floor&#10;    then&#10;      @act1; door(c) ≔ OPEN&#10;      @act2; down_buttons_array(floor(c)) ≔ FALSE&#10;      @act3; floor_buttons_array(c) ≔ floor_buttons_array(c)  {floor(c) ↦ FALSE }&#10;  end&#10;&#10;  event DoorHalfToOpen_UP refines DoorHalfToOpen_UP&#10;    any c&#10;    where&#10;      @grd1; c ∈ CABIN&#10;      @grd2; motor(c) = OFF&#10;      @grd3; door(c) = HALF&#10;      @grd4; cabinShaft(c) = UP&#10;      @grd5; up_buttons_array(floor(c)) = TRUE ∨ (floor_buttons_array(c))(floor(c)) = TRUE // same guard concept as event above&#10;    then&#10;      @act1; door(c) ≔ OPEN&#10;      @act2; up_buttons_array(floor(c)) ≔ FALSE&#10;      @act3; floor_buttons_array(c) ≔ floor_buttons_array(c)  {floor(c) ↦ FALSE }&#10;  end&#10;&#10;  event DoorClosedToHalf_DOWN refines DoorClosedToHalf_DOWN&#10;    any c&#10;    where&#10;      @grd1; c ∈ CABIN&#10;      @grd2; motor(c) = OFF&#10;      @grd3; door(c) = CLOSED&#10;      @grd4; cabinShaft(c) = DOWN&#10;      @grd5; down_buttons_array(floor(c)) = TRUE ∨ (floor_buttons_array(c))(floor(c)) = TRUE // same guard concept as above event&#10;    then&#10;      @act1; door(c) ≔ HALF&#10;  end&#10;&#10;  event DoorClosedToHalf_UP refines DoorClosedToHalf_UP&#10;    any c&#10;    where&#10;      @grd1; c ∈ CABIN&#10;      @grd2; motor(c) = OFF&#10;      @grd3; door(c) = CLOSED&#10;      @grd4; cabinShaft(c) = UP&#10;      @grd5; up_buttons_array(floor(c)) = TRUE ∨ (floor_buttons_array(c))(floor(c)) = TRUE // same guard concept as above event&#10;    then&#10;      @act1; door(c) ≔ HALF&#10;  end&#10;&#10;  event DoorOpenToHalf refines DoorOpenToHalf&#10;    any c&#10;    where&#10;      @grd1; c ∈ CABIN&#10;      @grd2; motor(c) = OFF&#10;      @grd3; door(c) = OPEN&#10;      @grd4; (cabinShaft(c) = DOWN) ⇒ ((floor(c) ≠ 0) ⇒ (down_buttons_array(floor(c))=FALSE))&#10;      @grd5; (cabinShaft(c) = UP) ⇒ ((floor(c) ≠ TOP_FLOOR) ⇒ (up_buttons_array(floor(c))=FALSE))&#10;      @grd6; (floor_buttons_array(c))(floor(c)) = FALSE // grd4,5,6 ensures door closing only if all relevent requests at the current floor have been cleared&#10;    then&#10;      @act1; door(c) ≔ HALF&#10;  end&#10;&#10;  event DoorHalfToClosed refines DoorHalfToClosed&#10;    any c&#10;    where&#10;      @grd1; c ∈ CABIN&#10;      @grd2; motor(c) = OFF&#10;      @grd3; door(c) = HALF&#10;      @grd4; (cabinShaft(c) = DOWN) ⇒ ((floor(c) ≠ 0) ⇒ (down_buttons_array(floor(c))=FALSE))&#10;      @grd5; (cabinShaft(c) = UP) ⇒ ((floor(c) ≠ TOP_FLOOR) ⇒ (up_buttons_array(floor(c))=FALSE))&#10;      @grd6; (floor_buttons_array(c))(floor(c)) = FALSE // grd4,5,6 ensures door closing only if all relevent requests at the current floor have been cleared&#10;    then&#10;      @act1; door(c) ≔ CLOSED&#10;  end&#10;&#10;  event UserPressesFloorButton refines UserPressesFloorButton&#10;    any c f&#10;    where&#10;      @grd1; c ∈ CABIN&#10;      @grd2; f ∈ FLOOR&#10;      @grd3; (floor_buttons_array(c))(f) = FALSE // button not already pressed&#10;      @grd4; (floor(c) = f) ⇒ (door(c) ≠ OPEN) // don't enable this event if the cabin is already open at this floor&#10;    then&#10;      @act1; floor_buttons_array(c) ≔ floor_buttons_array(c)  {f↦TRUE} // replace with true&#10;  end&#10;&#10;  event UserPressesDownButton refines UserPressesDownButton&#10;    any f&#10;    where&#10;      @grd1; f ∈ FLOOR&#10;      @grd2; f ≠ 0&#10;      @grd3; down_buttons_array(f) = FALSE // button not already pressed&#10;      @grd4; (∀c·(c ∈ CABIN ∧ floor(c)=f ∧ cabinShaft(c) = DOWN)⇒door(c) ≠ OPEN) // don't enable this event if there is already an open-door cabin at that floor in the DOWN shaft&#10;    then&#10;      @act1; down_buttons_array(f) ≔ TRUE&#10;  end&#10;&#10;  event UserPressesUpButton refines UserPressesUpButton&#10;    any f&#10;    where&#10;      @grd1; f ∈ FLOOR&#10;      @grd2; f ≠ TOP_FLOOR&#10;      @grd3; up_buttons_array(f) = FALSE // button not already pressed&#10;      @grd4; (∀c·(c ∈ CABIN ∧ floor(c)=f ∧ cabinShaft(c) = UP)⇒door(c) ≠ OPEN) // don't enable this event if there is already an open-door cabin at that floor in the UP shaft&#10;    then&#10;      @act1; up_buttons_array(f) ≔ TRUE&#10;  end&#10;end&#10;" version="5">
    <org.eventb.core.refinesMachine name="_MRERsEvKEemkcMhPsaVwyA" org.eventb.core.target="m4_buttons"/>
    <org.eventb.core.seesContext name="_MRERsUvKEemkcMhPsaVwyA" org.eventb.core.target="c3_door"/>
    <org.eventb.core.event name="'" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="INITIALISATION">
        <org.eventb.core.action name="_MRERskvKEemkcMhPsaVwyA" org.eventb.core.assignment="floor ≔ INIT_FLOOR" org.eventb.core.generated="false" org.eventb.core.label="init-floor;"/>
        <org.eventb.core.action name="_MRE4wEvKEemkcMhPsaVwyA" org.eventb.core.assignment="cabinShaft ≔ INIT_SHAFT" org.eventb.core.generated="false" org.eventb.core.label="init-shaft;"/>
        <org.eventb.core.action name="_MRE4wUvKEemkcMhPsaVwyA" org.eventb.core.assignment="motor ≔ INIT_MOTOR" org.eventb.core.generated="false" org.eventb.core.label="init-motor;"/>
        <org.eventb.core.action name="_MRE4wkvKEemkcMhPsaVwyA" org.eventb.core.assignment="door ≔ INIT_DOOR" org.eventb.core.generated="false" org.eventb.core.label="init-door;"/>
        <org.eventb.core.action name="_MRE4w0vKEemkcMhPsaVwyA" org.eventb.core.assignment="up_buttons_array ≔ (FLOOR) × {FALSE}" org.eventb.core.generated="false" org.eventb.core.label="init-up_buttons;"/>
        <org.eventb.core.action name="_MRE4xEvKEemkcMhPsaVwyA" org.eventb.core.assignment="down_buttons_array ≔ (FLOOR) × {FALSE}" org.eventb.core.generated="false" org.eventb.core.label="init-down_buttons;"/>
        <org.eventb.core.action name="_MRE4xUvKEemkcMhPsaVwyA" org.eventb.core.assignment="floor_buttons_array ≔ CABIN × {(FLOOR × {FALSE})}" org.eventb.core.comment="initially no requests, so false for everything" org.eventb.core.generated="false" org.eventb.core.label="init-floor_buttons;"/>
    </org.eventb.core.event>
    <org.eventb.core.variable name="_MRFf0EvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.identifier="floor"/>
    <org.eventb.core.variable name="_MRFf0UvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.identifier="cabinShaft"/>
    <org.eventb.core.variable name="_MRFf0kvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.identifier="motor"/>
    <org.eventb.core.variable name="_MRFf00vKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.identifier="door"/>
    <org.eventb.core.variable name="_MRFf1EvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.identifier="up_buttons_array"/>
    <org.eventb.core.variable name="_MRFf1UvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.identifier="down_buttons_array"/>
    <org.eventb.core.variable name="_MRGG4EvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.identifier="floor_buttons_array"/>
    <org.eventb.core.invariant name="_MRGG4UvKEemkcMhPsaVwyA" org.eventb.core.comment="change to array" org.eventb.core.generated="false" org.eventb.core.label="typeof-up-buttons-array" org.eventb.core.predicate="up_buttons_array ∈ FLOOR → BOOL"/>
    <org.eventb.core.invariant name="_MRGG4kvKEemkcMhPsaVwyA" org.eventb.core.comment="change to array" org.eventb.core.generated="false" org.eventb.core.label="typeof-down-buttons-array" org.eventb.core.predicate="down_buttons_array ∈ FLOOR → BOOL"/>
    <org.eventb.core.invariant name="_MRGG40vKEemkcMhPsaVwyA" org.eventb.core.comment="change to array" org.eventb.core.generated="false" org.eventb.core.label="typeof-floor-buttons-array" org.eventb.core.predicate="floor_buttons_array ∈ CABIN → (FLOOR → BOOL)"/>
    <org.eventb.core.invariant name="_MRGG5EvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="gluing-up_buttons" org.eventb.core.predicate="upButtons = dom(up_buttons_array ▷ {TRUE})"/>
    <org.eventb.core.invariant name="_MRGt8EvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="gluing-down_buttons" org.eventb.core.predicate="downButtons = dom(down_buttons_array ▷ {TRUE})"/>
    <org.eventb.core.event name="_MRIjIEvKEemkcMhPsaVwyA" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="CabinMovesUp">
        <org.eventb.core.refinesEvent name="_MRJKMEvKEemkcMhPsaVwyA" org.eventb.core.target="CabinMovesUp"/>
        <org.eventb.core.parameter name="_MRJKMUvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.identifier="c"/>
        <org.eventb.core.guard name="_MRJKMkvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd1;" org.eventb.core.predicate="c ∈ CABIN"/>
        <org.eventb.core.guard name="_MRJKM0vKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd2;" org.eventb.core.predicate="floor(c) ≠ TOP_FLOOR"/>
        <org.eventb.core.guard name="_MRJxQEvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd3;" org.eventb.core.predicate="cabinShaft(c) = UP"/>
        <org.eventb.core.guard name="_MRJxQUvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd4;" org.eventb.core.predicate="∀x·(x∈CABIN∧cabinShaft(x)=UP)⇒floor(x)≠floor(c)+1"/>
        <org.eventb.core.guard name="_MRJxQkvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd5;" org.eventb.core.predicate="motor(c) = ON"/>
        <org.eventb.core.guard name="_MRJxQ0vKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd6;" org.eventb.core.predicate="door(c) = CLOSED"/>
        <org.eventb.core.guard name="_MRJxREvKEemkcMhPsaVwyA" org.eventb.core.comment="no request from this floor to go up" org.eventb.core.generated="false" org.eventb.core.label="grd7;" org.eventb.core.predicate="up_buttons_array(floor(c)) = FALSE"/>
        <org.eventb.core.action name="_MRJxRUvKEemkcMhPsaVwyA" org.eventb.core.assignment="floor(c) ≔ floor(c) + 1" org.eventb.core.generated="false" org.eventb.core.label="act1"/>
        <org.eventb.core.guard name="_MRMNhUvKEemkcMhPsaVwyA" org.eventb.core.comment="no request from this cabin at this floor" org.eventb.core.generated="false" org.eventb.core.label="grd8;" org.eventb.core.predicate="(floor_buttons_array(c))(floor(c)) = FALSE"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_MRJxRkvKEemkcMhPsaVwyA" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="CabinMovesDown">
        <org.eventb.core.refinesEvent name="_MRKYUEvKEemkcMhPsaVwyA" org.eventb.core.target="CabinMovesDown"/>
        <org.eventb.core.parameter name="_MRKYUUvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.identifier="c"/>
        <org.eventb.core.guard name="_MRKYUkvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd1" org.eventb.core.predicate="c ∈ CABIN"/>
        <org.eventb.core.guard name="_MRKYU0vKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd2" org.eventb.core.predicate="floor(c) ≠ 0"/>
        <org.eventb.core.guard name="_MRKYVEvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd3;" org.eventb.core.predicate="cabinShaft(c) = DOWN"/>
        <org.eventb.core.guard name="_MRK_YEvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd4;" org.eventb.core.predicate="∀x·(x∈CABIN∧cabinShaft(x)=DOWN)⇒floor(x)≠floor(c)−1"/>
        <org.eventb.core.guard name="_MRK_YUvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd5;" org.eventb.core.predicate="motor(c) = ON"/>
        <org.eventb.core.guard name="_MRK_YkvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd6;" org.eventb.core.predicate="door(c) = CLOSED"/>
        <org.eventb.core.guard name="_MRK_Y0vKEemkcMhPsaVwyA" org.eventb.core.comment="same concepts as above event" org.eventb.core.generated="false" org.eventb.core.label="grd7;" org.eventb.core.predicate="down_buttons_array(floor(c)) = FALSE"/>
        <org.eventb.core.action name="_MRLmcEvKEemkcMhPsaVwyA" org.eventb.core.assignment="floor(c) ≔ floor(c) − 1" org.eventb.core.generated="false" org.eventb.core.label="act1;"/>
        <org.eventb.core.guard name="_MRNbokvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd8;" org.eventb.core.predicate="(floor_buttons_array(c))(floor(c)) = FALSE"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_MRLmcUvKEemkcMhPsaVwyA" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="CabinDownToUp">
        <org.eventb.core.refinesEvent name="_MRLmckvKEemkcMhPsaVwyA" org.eventb.core.target="CabinDownToUp"/>
        <org.eventb.core.parameter name="_MRLmc0vKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.identifier="c"/>
        <org.eventb.core.guard name="_MRLmdEvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd1;" org.eventb.core.predicate="c ∈ CABIN"/>
        <org.eventb.core.guard name="_MRLmdUvKEemkcMhPsaVwyA" org.eventb.core.comment="satisfies REQ 5" org.eventb.core.generated="false" org.eventb.core.label="grd2;" org.eventb.core.predicate="floor(c) = 0"/>
        <org.eventb.core.guard name="_MRMNgEvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd3;" org.eventb.core.predicate="cabinShaft(c) = DOWN"/>
        <org.eventb.core.guard name="_MRMNgUvKEemkcMhPsaVwyA" org.eventb.core.comment="to satisfy inv3 (SAF 8)" org.eventb.core.generated="false" org.eventb.core.label="grd4;" org.eventb.core.predicate="∀y·(y∈CABIN∧cabinShaft(y)=UP)⇒(floor(y)≠0)"/>
        <org.eventb.core.guard name="_MRMNgkvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd5;" org.eventb.core.predicate="motor(c) = OFF"/>
        <org.eventb.core.guard name="_MRMNg0vKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd6;" org.eventb.core.predicate="door(c) = CLOSED"/>
        <org.eventb.core.guard name="_MRMNhEvKEemkcMhPsaVwyA" org.eventb.core.comment="only change shaft if no request for this cabin to stop at this floor" org.eventb.core.generated="false" org.eventb.core.label="grd7;" org.eventb.core.predicate="(floor_buttons_array(c))(floor(c)) = FALSE"/>
        <org.eventb.core.action name="_MRMNhkvKEemkcMhPsaVwyA" org.eventb.core.assignment="cabinShaft(c) ≔ UP" org.eventb.core.generated="false" org.eventb.core.label="act1;"/>
        <org.eventb.core.guard name="_MRS7MEvKEemkcMhPsaVwyA" org.eventb.core.comment="must be some request in the system to justify a cabin" org.eventb.core.generated="false" org.eventb.core.label="grd8;" org.eventb.core.predicate="(∃f·(f∈floor_buttons_array[CABIN]∧TRUE∈ran(f))) ∨ TRUE ∈ ran(up_buttons_array ∪ down_buttons_array)"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_MRM0kEvKEemkcMhPsaVwyA" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="CabinUpToDown">
        <org.eventb.core.refinesEvent name="_MRM0kUvKEemkcMhPsaVwyA" org.eventb.core.target="CabinUpToDown"/>
        <org.eventb.core.parameter name="_MRM0kkvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.identifier="c"/>
        <org.eventb.core.guard name="_MRM0k0vKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd1;" org.eventb.core.predicate="c ∈ CABIN"/>
        <org.eventb.core.guard name="_MRM0lEvKEemkcMhPsaVwyA" org.eventb.core.comment="satisfies REQ 4" org.eventb.core.generated="false" org.eventb.core.label="grd2;" org.eventb.core.predicate="floor(c) = TOP_FLOOR"/>
        <org.eventb.core.guard name="_MRM0lUvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd3;" org.eventb.core.predicate="cabinShaft(c) = UP"/>
        <org.eventb.core.guard name="_MRM0lkvKEemkcMhPsaVwyA" org.eventb.core.comment="to satisfy inv3 (SAF 8)" org.eventb.core.generated="false" org.eventb.core.label="grd4;" org.eventb.core.predicate="∀x·(x∈CABIN∧cabinShaft(x)=DOWN)⇒floor(x)≠TOP_FLOOR"/>
        <org.eventb.core.guard name="_MRM0l0vKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd5;" org.eventb.core.predicate="motor(c) = OFF"/>
        <org.eventb.core.guard name="_MRNboEvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd6;" org.eventb.core.predicate="door(c) = CLOSED"/>
        <org.eventb.core.guard name="_MRNboUvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd7;" org.eventb.core.predicate="(floor_buttons_array(c))(floor(c)) = FALSE"/>
        <org.eventb.core.action name="_MRNbo0vKEemkcMhPsaVwyA" org.eventb.core.assignment="cabinShaft(c) ≔ DOWN" org.eventb.core.generated="false" org.eventb.core.label="act1;"/>
        <org.eventb.core.guard name="_cq6_wEvwEemU6MdqK70RsA" org.eventb.core.comment="same concepts as the event above" org.eventb.core.generated="false" org.eventb.core.label="grd8;" org.eventb.core.predicate="(∃f·(f∈floor_buttons_array[CABIN]∧TRUE∈ran(f))) ∨ TRUE ∈ ran(up_buttons_array ∪ down_buttons_array)"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_MRNbpEvKEemkcMhPsaVwyA" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="MotorStopsChangeShaft">
        <org.eventb.core.refinesEvent name="_MRNbpUvKEemkcMhPsaVwyA" org.eventb.core.target="MotorStopsChangeShaft"/>
        <org.eventb.core.parameter name="_MRNbpkvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.identifier="c"/>
        <org.eventb.core.guard name="_MRNbp0vKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd1;" org.eventb.core.predicate="c ∈ CABIN"/>
        <org.eventb.core.guard name="_MROCsEvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd2;" org.eventb.core.predicate="motor(c) = ON"/>
        <org.eventb.core.guard name="_MROCsUvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd3;" org.eventb.core.predicate="(cabinShaft(c) = UP) ⇒ floor(c) = TOP_FLOOR"/>
        <org.eventb.core.guard name="_MROCskvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd4;" org.eventb.core.predicate="(cabinShaft(c) = DOWN) ⇒ floor(c) = 0"/>
        <org.eventb.core.guard name="_MROCs0vKEemkcMhPsaVwyA" org.eventb.core.comment="there must be some request to justify a cabi stopping its motor and changing its shaft" org.eventb.core.generated="false" org.eventb.core.label="grd5;" org.eventb.core.predicate="(∃f·f ∈ FLOOR ∧ f≠floor(c)∧(floor_buttons_array(c))(f) = TRUE) ∨ (cabinShaft(c) = UP ⇒ (TRUE ∈ ran(down_buttons_array))) ∨ (cabinShaft(c) = DOWN ⇒ (TRUE ∈ ran(up_buttons_array)))"/>
        <org.eventb.core.action name="_MROCtEvKEemkcMhPsaVwyA" org.eventb.core.assignment="motor(c) ≔ OFF" org.eventb.core.generated="false" org.eventb.core.label="act1;"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_MROCtUvKEemkcMhPsaVwyA" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="MotorStopsAvoidCollision">
        <org.eventb.core.refinesEvent name="_MROCtkvKEemkcMhPsaVwyA" org.eventb.core.target="MotorStopsAvoidCollision"/>
        <org.eventb.core.parameter name="_MROpwEvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.identifier="c"/>
        <org.eventb.core.guard name="_MROpwUvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd1;" org.eventb.core.predicate="c ∈ CABIN"/>
        <org.eventb.core.guard name="_MROpwkvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd2;" org.eventb.core.predicate="motor(c) = ON"/>
        <org.eventb.core.guard name="_MROpw0vKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd3;" org.eventb.core.predicate="(cabinShaft(c) = UP) ⇒ (∃x·x∈CABIN∧cabinShaft(x)=UP∧floor(x)=floor(c)+1)"/>
        <org.eventb.core.guard name="_MROpxEvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd4;" org.eventb.core.predicate="(cabinShaft(c) = DOWN) ⇒ (∃x·x∈CABIN∧cabinShaft(x)=DOWN∧floor(x)=floor(c)−1)"/>
        <org.eventb.core.action name="_MROpxUvKEemkcMhPsaVwyA" org.eventb.core.assignment="motor(c) ≔ OFF" org.eventb.core.generated="false" org.eventb.core.label="act1;"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_MROpxkvKEemkcMhPsaVwyA" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="MotorStopsNoRequest">
        <org.eventb.core.refinesEvent name="_MRPQ0EvKEemkcMhPsaVwyA" org.eventb.core.target="MotorStopsNoRequest"/>
        <org.eventb.core.parameter name="_MRPQ0UvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.identifier="c"/>
        <org.eventb.core.guard name="_MRPQ0kvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd1;" org.eventb.core.predicate="c ∈ CABIN"/>
        <org.eventb.core.guard name="_MRPQ00vKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd2;" org.eventb.core.predicate="motor(c) = ON"/>
        <org.eventb.core.guard name="_MRPQ1EvKEemkcMhPsaVwyA" org.eventb.core.comment="no requests from any cabin" org.eventb.core.generated="false" org.eventb.core.label="grd3;" org.eventb.core.predicate="((∀f·(f∈floor_buttons_array[CABIN]⇒TRUE∉ran(f))))"/>
        <org.eventb.core.action name="_MRPQ1UvKEemkcMhPsaVwyA" org.eventb.core.assignment="motor(c) ≔ OFF" org.eventb.core.generated="false" org.eventb.core.label="act1;"/>
        <org.eventb.core.guard name="_MRQe8UvKEemkcMhPsaVwyA" org.eventb.core.comment="no up or down requests at any floor" org.eventb.core.generated="false" org.eventb.core.label="grd4;" org.eventb.core.predicate="TRUE ∉ ran(up_buttons_array ∪ down_buttons_array)"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_MRP34EvKEemkcMhPsaVwyA" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="MotorStopsOtherCabinRequest">
        <org.eventb.core.refinesEvent name="_MRP34UvKEemkcMhPsaVwyA" org.eventb.core.target="MotorStopsOtherCabinRequest"/>
        <org.eventb.core.parameter name="_MRP34kvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.identifier="c"/>
        <org.eventb.core.guard name="_MRP340vKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd1;" org.eventb.core.predicate="c ∈ CABIN"/>
        <org.eventb.core.guard name="_MRP35EvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd2;" org.eventb.core.predicate="motor(c) = ON"/>
        <org.eventb.core.guard name="_MRQe8EvKEemkcMhPsaVwyA" org.eventb.core.comment="no up or down requests from any floor" org.eventb.core.generated="false" org.eventb.core.label="grd3;" org.eventb.core.predicate="TRUE ∉ ran(up_buttons_array ∪ down_buttons_array)"/>
        <org.eventb.core.guard name="_MRRtEEvKEemkcMhPsaVwyA" org.eventb.core.comment="if cabin is in UP shaft, no other cabin has a request to go to this cabin's current floor or the one above it" org.eventb.core.generated="false" org.eventb.core.label="grd4;" org.eventb.core.predicate="(cabinShaft(c) = UP) ⇒ (∀f·f∈floor_buttons_array[CABIN] ⇒ TRUE ∉ f[floor(c)‥TOP_FLOOR])"/>
        <org.eventb.core.guard name="_MRQe8kvKEemkcMhPsaVwyA" org.eventb.core.comment="same concept as above guard but for DOWN shaft" org.eventb.core.generated="false" org.eventb.core.label="grd5;" org.eventb.core.predicate="(cabinShaft(c) = DOWN) ⇒ (∀f·f∈floor_buttons_array[CABIN] ⇒ TRUE ∉ f[0‥floor(c)])"/>
        <org.eventb.core.action name="_MRRGAEvKEemkcMhPsaVwyA" org.eventb.core.assignment="motor(c) ≔ OFF" org.eventb.core.generated="false" org.eventb.core.label="act1;"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_MRRGAUvKEemkcMhPsaVwyA" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="MotorStopsServesRequest">
        <org.eventb.core.refinesEvent name="_MRRGAkvKEemkcMhPsaVwyA" org.eventb.core.target="MotorStopsServesRequest"/>
        <org.eventb.core.parameter name="_MRRGA0vKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.identifier="c"/>
        <org.eventb.core.guard name="_MRRGBEvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd1;" org.eventb.core.predicate="c ∈ CABIN"/>
        <org.eventb.core.guard name="_MRRGBUvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd2;" org.eventb.core.predicate="motor(c) = ON"/>
        <org.eventb.core.guard name="_MRRGBkvKEemkcMhPsaVwyA" org.eventb.core.comment="if cabin is in DOWN shaft, either there is a down request at the current floor or the cabin has a request to stop at this floor" org.eventb.core.generated="false" org.eventb.core.label="grd3;" org.eventb.core.predicate="(cabinShaft(c) = DOWN) ⇒ (down_buttons_array(floor(c)) = TRUE ∨ (floor_buttons_array(c))(floor(c)) = TRUE)"/>
        <org.eventb.core.action name="_MRRtEUvKEemkcMhPsaVwyA" org.eventb.core.assignment="motor(c) ≔ OFF" org.eventb.core.generated="false" org.eventb.core.label="act1;"/>
        <org.eventb.core.guard name="_MRSUIEvKEemkcMhPsaVwyA" org.eventb.core.comment="if cabin is in UP shaft, either there is a up request at the current floor or the cabin has a request to stop at this floor" org.eventb.core.generated="false" org.eventb.core.label="grd4;" org.eventb.core.predicate="(cabinShaft(c) = UP) ⇒ (up_buttons_array(floor(c)) = TRUE ∨ (floor_buttons_array(c))(floor(c)) = TRUE)"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_MRRtEkvKEemkcMhPsaVwyA" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="MotorStarts">
        <org.eventb.core.refinesEvent name="_MRRtE0vKEemkcMhPsaVwyA" org.eventb.core.target="MotorStarts"/>
        <org.eventb.core.parameter name="_MRRtFEvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.identifier="c"/>
        <org.eventb.core.guard name="_MRRtFUvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd1;" org.eventb.core.predicate="c ∈ CABIN"/>
        <org.eventb.core.guard name="_MRRtFkvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd2;" org.eventb.core.predicate="motor(c) = OFF"/>
        <org.eventb.core.guard name="_MRRtF0vKEemkcMhPsaVwyA" org.eventb.core.comment="cabin's motor can't start when it is in DOWN shaft and bottom floor- where would it go?" org.eventb.core.generated="false" org.eventb.core.label="grd3;" org.eventb.core.predicate="(cabinShaft(c)=DOWN⇒floor(c)≠0)"/>
        <org.eventb.core.guard name="_crJCMUvwEemU6MdqK70RsA" org.eventb.core.comment="same as above but for UP shaft" org.eventb.core.generated="false" org.eventb.core.label="grd4;" org.eventb.core.predicate="(cabinShaft(c)=UP⇒floor(c)≠TOP_FLOOR)"/>
        <org.eventb.core.guard name="_MRSUIUvKEemkcMhPsaVwyA" org.eventb.core.comment="if cabin is in UP shaft, its motor should not be started if there is another cabin above it" org.eventb.core.generated="false" org.eventb.core.label="grd5;" org.eventb.core.predicate="(cabinShaft(c)=UP)⇒(∀x·(x∈CABIN∧cabinShaft(x)=UP⇒floor(x)≠floor(c)+1))"/>
        <org.eventb.core.guard name="_MRSUIkvKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd6;" org.eventb.core.predicate="(cabinShaft(c)=DOWN)⇒(∀x·(x∈CABIN∧cabinShaft(x)=DOWN⇒floor(x)≠floor(c)−1))"/>
        <org.eventb.core.guard name="_MRSUI0vKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd7;" org.eventb.core.predicate="door(c) = CLOSED"/>
        <org.eventb.core.guard name="_crGl8EvwEemU6MdqK70RsA" org.eventb.core.comment="no request to stop at this floor" org.eventb.core.generated="false" org.eventb.core.label="grd8;" org.eventb.core.predicate="(floor_buttons_array(c))(floor(c)) = FALSE"/>
        <org.eventb.core.guard name="_MRS7MUvKEemkcMhPsaVwyA" org.eventb.core.comment="if in UP shaft there is no up request on the floor at which the cabin is" org.eventb.core.generated="false" org.eventb.core.label="grd9;" org.eventb.core.predicate="(cabinShaft(c) = UP) ⇒ (up_buttons_array(floor(c))≠TRUE)"/>
        <org.eventb.core.guard name="_MRS7MkvKEemkcMhPsaVwyA" org.eventb.core.comment="if in DOWN shaft there is no down request on the at which the cabin is" org.eventb.core.generated="false" org.eventb.core.label="grd10;" org.eventb.core.predicate="(cabinShaft(c) = DOWN) ⇒ (down_buttons_array(floor(c))≠TRUE)"/>
        <org.eventb.core.guard name="_MRS7M0vKEemkcMhPsaVwyA" org.eventb.core.generated="false" org.eventb.core.label="grd11;" org.eventb.core.predicate="(∃f·(f∈floor_buttons_array[CABIN]∧TRUE∈ran(f))) ∨ TRUE ∈ ran(up_buttons_array ∪ down_buttons_array)"/>
        <org.eventb.core.action name="_MRS7NEvKEemkcMhPsaVwyA" org.eventb.core.assignment="motor(c) ≔ ON" org.eventb.core.generated="false" org.eventb.core.label="act1;"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_crH0EEvwEemU6MdqK70RsA" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="DoorHalfToOpen_DOWN">
        <org.eventb.core.refinesEvent name="_crH0EUvwEemU6MdqK70RsA" org.eventb.core.target="DoorHalfToOpen_DOWN"/>
        <org.eventb.core.parameter name="_crIbIEvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.identifier="c"/>
        <org.eventb.core.guard name="_crIbIUvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.label="grd1;" org.eventb.core.predicate="c ∈ CABIN"/>
        <org.eventb.core.guard name="_crIbIkvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.label="grd2;" org.eventb.core.predicate="motor(c) = OFF"/>
        <org.eventb.core.guard name="_crJCMEvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.label="grd3;" org.eventb.core.predicate="door(c) = HALF"/>
        <org.eventb.core.action name="_crJpQUvwEemU6MdqK70RsA" org.eventb.core.assignment="door(c) ≔ OPEN" org.eventb.core.generated="false" org.eventb.core.label="act1;"/>
        <org.eventb.core.action name="_crJpQkvwEemU6MdqK70RsA" org.eventb.core.assignment="down_buttons_array(floor(c)) ≔ FALSE" org.eventb.core.generated="false" org.eventb.core.label="act2;"/>
        <org.eventb.core.action name="_crKQUEvwEemU6MdqK70RsA" org.eventb.core.assignment="floor_buttons_array(c) ≔ floor_buttons_array(c)  {floor(c) ↦ FALSE }" org.eventb.core.generated="false" org.eventb.core.label="act3;"/>
        <org.eventb.core.guard name="_crK3Y0vwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.label="grd4;" org.eventb.core.predicate="cabinShaft(c) = DOWN"/>
        <org.eventb.core.guard name="_crF-4EvwEemU6MdqK70RsA" org.eventb.core.comment="only open if there is a request at that floor" org.eventb.core.generated="false" org.eventb.core.label="grd5;" org.eventb.core.predicate="down_buttons_array(floor(c)) = TRUE ∨ (floor_buttons_array(c))(floor(c)) = TRUE"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_crKQUUvwEemU6MdqK70RsA" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="DoorHalfToOpen_UP">
        <org.eventb.core.refinesEvent name="_crKQUkvwEemU6MdqK70RsA" org.eventb.core.target="DoorHalfToOpen_UP"/>
        <org.eventb.core.parameter name="_crKQU0vwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.identifier="c"/>
        <org.eventb.core.guard name="_crK3YEvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.label="grd1;" org.eventb.core.predicate="c ∈ CABIN"/>
        <org.eventb.core.guard name="_crK3YUvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.label="grd2;" org.eventb.core.predicate="motor(c) = OFF"/>
        <org.eventb.core.guard name="_crK3YkvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.label="grd3;" org.eventb.core.predicate="door(c) = HALF"/>
        <org.eventb.core.action name="_crLecUvwEemU6MdqK70RsA" org.eventb.core.assignment="door(c) ≔ OPEN" org.eventb.core.generated="false" org.eventb.core.label="act1;"/>
        <org.eventb.core.action name="_crLeckvwEemU6MdqK70RsA" org.eventb.core.assignment="up_buttons_array(floor(c)) ≔ FALSE" org.eventb.core.generated="false" org.eventb.core.label="act2;"/>
        <org.eventb.core.action name="_crMFgEvwEemU6MdqK70RsA" org.eventb.core.assignment="floor_buttons_array(c) ≔ floor_buttons_array(c)  {floor(c) ↦ FALSE }" org.eventb.core.generated="false" org.eventb.core.label="act3;"/>
        <org.eventb.core.guard name="_crNToUvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.label="grd4;" org.eventb.core.predicate="cabinShaft(c) = UP"/>
        <org.eventb.core.guard name="_crJpQEvwEemU6MdqK70RsA" org.eventb.core.comment="same guard concept as event above" org.eventb.core.generated="false" org.eventb.core.label="grd5;" org.eventb.core.predicate="up_buttons_array(floor(c)) = TRUE ∨ (floor_buttons_array(c))(floor(c)) = TRUE"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_crMFgUvwEemU6MdqK70RsA" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="DoorClosedToHalf_DOWN">
        <org.eventb.core.refinesEvent name="_crMskEvwEemU6MdqK70RsA" org.eventb.core.target="DoorClosedToHalf_DOWN"/>
        <org.eventb.core.parameter name="_crMskUvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.identifier="c"/>
        <org.eventb.core.guard name="_crMskkvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.label="grd1;" org.eventb.core.predicate="c ∈ CABIN"/>
        <org.eventb.core.guard name="_crMsk0vwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.label="grd2;" org.eventb.core.predicate="motor(c) = OFF"/>
        <org.eventb.core.guard name="_crNToEvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.label="grd3;" org.eventb.core.predicate="door(c) = CLOSED"/>
        <org.eventb.core.action name="_crN6skvwEemU6MdqK70RsA" org.eventb.core.assignment="door(c) ≔ HALF" org.eventb.core.generated="false" org.eventb.core.label="act1;"/>
        <org.eventb.core.guard name="_crPI0kvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.label="grd4;" org.eventb.core.predicate="cabinShaft(c) = DOWN"/>
        <org.eventb.core.guard name="_crLecEvwEemU6MdqK70RsA" org.eventb.core.comment="same guard concept as above event" org.eventb.core.generated="false" org.eventb.core.label="grd5;" org.eventb.core.predicate="down_buttons_array(floor(c)) = TRUE ∨ (floor_buttons_array(c))(floor(c)) = TRUE"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_crOhwEvwEemU6MdqK70RsA" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="DoorClosedToHalf_UP">
        <org.eventb.core.refinesEvent name="_crOhwUvwEemU6MdqK70RsA" org.eventb.core.target="DoorClosedToHalf_UP"/>
        <org.eventb.core.parameter name="_crOhwkvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.identifier="c"/>
        <org.eventb.core.guard name="_crOhw0vwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.label="grd1;" org.eventb.core.predicate="c ∈ CABIN"/>
        <org.eventb.core.guard name="_crPI0EvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.label="grd2;" org.eventb.core.predicate="motor(c) = OFF"/>
        <org.eventb.core.guard name="_crPI0UvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.label="grd3;" org.eventb.core.predicate="door(c) = CLOSED"/>
        <org.eventb.core.action name="_crPv4kvwEemU6MdqK70RsA" org.eventb.core.assignment="door(c) ≔ HALF" org.eventb.core.generated="false" org.eventb.core.label="act1;"/>
        <org.eventb.core.guard name="_crRlEEvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.label="grd4;" org.eventb.core.predicate="cabinShaft(c) = UP"/>
        <org.eventb.core.guard name="_crN6sEvwEemU6MdqK70RsA" org.eventb.core.comment="same guard concept as above event" org.eventb.core.generated="false" org.eventb.core.label="grd5;" org.eventb.core.predicate="up_buttons_array(floor(c)) = TRUE ∨ (floor_buttons_array(c))(floor(c)) = TRUE"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_crQW8EvwEemU6MdqK70RsA" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="DoorOpenToHalf">
        <org.eventb.core.refinesEvent name="_crQW8UvwEemU6MdqK70RsA" org.eventb.core.target="DoorOpenToHalf"/>
        <org.eventb.core.parameter name="_crQW8kvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.identifier="c"/>
        <org.eventb.core.guard name="_crQ-AEvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.label="grd1;" org.eventb.core.predicate="c ∈ CABIN"/>
        <org.eventb.core.guard name="_crQ-AUvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.label="grd2;" org.eventb.core.predicate="motor(c) = OFF"/>
        <org.eventb.core.guard name="_crQ-AkvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.label="grd3;" org.eventb.core.predicate="door(c) = OPEN"/>
        <org.eventb.core.action name="_crSMIEvwEemU6MdqK70RsA" org.eventb.core.assignment="door(c) ≔ HALF" org.eventb.core.generated="false" org.eventb.core.label="act1;"/>
        <org.eventb.core.guard name="_crTaQkvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.label="grd4;" org.eventb.core.predicate="(cabinShaft(c) = DOWN) ⇒ ((floor(c) ≠ 0) ⇒ (down_buttons_array(floor(c))=FALSE))"/>
        <org.eventb.core.guard name="_crPv4EvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.label="grd5;" org.eventb.core.predicate="(cabinShaft(c) = UP) ⇒ ((floor(c) ≠ TOP_FLOOR) ⇒ (up_buttons_array(floor(c))=FALSE))"/>
        <org.eventb.core.guard name="_crN6sUvwEemU6MdqK70RsA" org.eventb.core.comment="grd4,5,6 ensures door closing only if all relevent requests at the current floor have been cleared" org.eventb.core.generated="false" org.eventb.core.label="grd6;" org.eventb.core.predicate="(floor_buttons_array(c))(floor(c)) = FALSE"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_crSMIUvwEemU6MdqK70RsA" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="DoorHalfToClosed">
        <org.eventb.core.refinesEvent name="_crSzMEvwEemU6MdqK70RsA" org.eventb.core.target="DoorHalfToClosed"/>
        <org.eventb.core.parameter name="_crSzMUvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.identifier="c"/>
        <org.eventb.core.guard name="_crSzMkvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.label="grd1;" org.eventb.core.predicate="c ∈ CABIN"/>
        <org.eventb.core.guard name="_crTaQEvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.label="grd2;" org.eventb.core.predicate="motor(c) = OFF"/>
        <org.eventb.core.guard name="_crTaQUvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.label="grd3;" org.eventb.core.predicate="door(c) = HALF"/>
        <org.eventb.core.action name="_crUoYEvwEemU6MdqK70RsA" org.eventb.core.assignment="door(c) ≔ CLOSED" org.eventb.core.generated="false" org.eventb.core.label="act1;"/>
        <org.eventb.core.guard name="_crV2gUvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.label="grd4;" org.eventb.core.predicate="(cabinShaft(c) = DOWN) ⇒ ((floor(c) ≠ 0) ⇒ (down_buttons_array(floor(c))=FALSE))"/>
        <org.eventb.core.guard name="_crRlEUvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.label="grd5;" org.eventb.core.predicate="(cabinShaft(c) = UP) ⇒ ((floor(c) ≠ TOP_FLOOR) ⇒ (up_buttons_array(floor(c))=FALSE))"/>
        <org.eventb.core.guard name="_crPv4UvwEemU6MdqK70RsA" org.eventb.core.comment="grd4,5,6 ensures door closing only if all relevent requests at the current floor have been cleared" org.eventb.core.generated="false" org.eventb.core.label="grd6;" org.eventb.core.predicate="(floor_buttons_array(c))(floor(c)) = FALSE"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_crUoYUvwEemU6MdqK70RsA" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="UserPressesFloorButton">
        <org.eventb.core.refinesEvent name="_crUoYkvwEemU6MdqK70RsA" org.eventb.core.target="UserPressesFloorButton"/>
        <org.eventb.core.parameter name="_crVPcEvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.identifier="c"/>
        <org.eventb.core.parameter name="_crVPcUvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.identifier="f"/>
        <org.eventb.core.guard name="_crVPckvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.label="grd1;" org.eventb.core.predicate="c ∈ CABIN"/>
        <org.eventb.core.guard name="_crVPc0vwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.label="grd2;" org.eventb.core.predicate="f ∈ FLOOR"/>
        <org.eventb.core.guard name="_crV2gEvwEemU6MdqK70RsA" org.eventb.core.comment="button not already pressed" org.eventb.core.generated="false" org.eventb.core.label="grd3;" org.eventb.core.predicate="(floor_buttons_array(c))(f) = FALSE"/>
        <org.eventb.core.action name="_crWdkEvwEemU6MdqK70RsA" org.eventb.core.assignment="floor_buttons_array(c) ≔ floor_buttons_array(c)  {f↦TRUE}" org.eventb.core.comment="replace with true" org.eventb.core.generated="false" org.eventb.core.label="act1;"/>
        <org.eventb.core.guard name="_crXrsEvwEemU6MdqK70RsA" org.eventb.core.comment="don't enable this event if the cabin is already open at this floor" org.eventb.core.generated="false" org.eventb.core.label="grd4;" org.eventb.core.predicate="(floor(c) = f) ⇒ (door(c) ≠ OPEN)"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_crWdkUvwEemU6MdqK70RsA" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="UserPressesDownButton">
        <org.eventb.core.refinesEvent name="_crWdkkvwEemU6MdqK70RsA" org.eventb.core.target="UserPressesDownButton"/>
        <org.eventb.core.parameter name="_crXEoEvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.identifier="f"/>
        <org.eventb.core.guard name="_crXEoUvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.label="grd1;" org.eventb.core.predicate="f ∈ FLOOR"/>
        <org.eventb.core.guard name="_crXEokvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.label="grd2;" org.eventb.core.predicate="f ≠ 0"/>
        <org.eventb.core.guard name="_crXEo0vwEemU6MdqK70RsA" org.eventb.core.comment="button not already pressed" org.eventb.core.generated="false" org.eventb.core.label="grd3;" org.eventb.core.predicate="down_buttons_array(f) = FALSE"/>
        <org.eventb.core.action name="_crXrsUvwEemU6MdqK70RsA" org.eventb.core.assignment="down_buttons_array(f) ≔ TRUE" org.eventb.core.generated="false" org.eventb.core.label="act1;"/>
        <org.eventb.core.guard name="_crZg4EvwEemU6MdqK70RsA" org.eventb.core.comment="don't enable this event if there is already an open-door cabin at that floor in the DOWN shaft" org.eventb.core.generated="false" org.eventb.core.label="grd4;" org.eventb.core.predicate="(∀c·(c ∈ CABIN ∧ floor(c)=f ∧ cabinShaft(c) = DOWN)⇒door(c) ≠ OPEN)"/>
    </org.eventb.core.event>
    <org.eventb.core.event name="_crYSwEvwEemU6MdqK70RsA" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.generated="false" org.eventb.core.label="UserPressesUpButton">
        <org.eventb.core.refinesEvent name="_crYSwUvwEemU6MdqK70RsA" org.eventb.core.target="UserPressesUpButton"/>
        <org.eventb.core.parameter name="_crY50EvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.identifier="f"/>
        <org.eventb.core.guard name="_crY50UvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.label="grd1;" org.eventb.core.predicate="f ∈ FLOOR"/>
        <org.eventb.core.guard name="_crY50kvwEemU6MdqK70RsA" org.eventb.core.generated="false" org.eventb.core.label="grd2;" org.eventb.core.predicate="f ≠ TOP_FLOOR"/>
        <org.eventb.core.guard name="_crY500vwEemU6MdqK70RsA" org.eventb.core.comment="button not already pressed" org.eventb.core.generated="false" org.eventb.core.label="grd3;" org.eventb.core.predicate="up_buttons_array(f) = FALSE"/>
        <org.eventb.core.action name="_crZg4UvwEemU6MdqK70RsA" org.eventb.core.assignment="up_buttons_array(f) ≔ TRUE" org.eventb.core.generated="false" org.eventb.core.label="act1;"/>
        <org.eventb.core.guard name="_bWor0FBuEemsBfIdxapC9A" org.eventb.core.comment="don't enable this event if there is already an open-door cabin at that floor in the UP shaft" org.eventb.core.generated="false" org.eventb.core.label="grd4;" org.eventb.core.predicate="(∀c·(c ∈ CABIN ∧ floor(c)=f ∧ cabinShaft(c) = UP)⇒door(c) ≠ OPEN)"/>
    </org.eventb.core.event>
    <org.eventb.core.invariant name="_vxAdQFB5Eemfoq9aQGqQ-Q" org.eventb.core.generated="false" org.eventb.core.label="gluing-floor_buttons1" org.eventb.core.predicate="∀c·c∈CABIN ⇒ floorButtons(c) = dom(floor_buttons_array(c) ▷ {TRUE})"/>
    <org.eventb.core.invariant name="_vxAdQVB5Eemfoq9aQGqQ-Q" org.eventb.core.comment="gluing invariants for every cabin c" org.eventb.core.generated="false" org.eventb.core.label="gluing-floor_buttons2" org.eventb.core.predicate="∀c·c∈CABIN ⇒ floor_buttons_array(c) = (floorButtons(c)×{TRUE})∪(((0‥TOP_FLOOR)∖floorButtons(c))×{FALSE})"/>
    <org.eventb.core.invariant name="__mhtIEyXEem9__q3rcKRtA" org.eventb.core.comment="no up request from TOP_FLOOR" org.eventb.core.generated="false" org.eventb.core.label="no_upButton_on_TOP_FLOOR" org.eventb.core.predicate="up_buttons_array(TOP_FLOOR) = FALSE"/>
    <org.eventb.core.invariant name="__mhtIUyXEem9__q3rcKRtA" org.eventb.core.comment="no down request from floor 0" org.eventb.core.generated="false" org.eventb.core.label="no_downButton_on_0" org.eventb.core.predicate="down_buttons_array(0) = FALSE"/>
</org.eventb.core.machineFile>
